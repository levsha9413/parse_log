# parse_log

Работа скрипта состоит из следующих этапов:
1. Определяем аргументы для запуска с помощью библиотеки argparse
2. Создаем объекты re компилируя регулярные выражения для поиска определенных паттернов внутри логов
3. Так как файл логов может быть очень большим, создаем функции возвращающие объект генератор
   1. get_string_some_files() - генератор для работы с директорией логов, он итерируется по файлу и переходит 
   на следующий файл при окончании текущего 
   2. get_string_single_files() - аналогичный генератор, но для работы с единичным фалом логов
4. Создаем объект генератор в зависимости от переданного в аргументе пути:
   1. если в аргументе скрипта был передан путь до директории, то срабатывает вариант
   logs = get_string_some_files()
   2. если передан путь до конкретного файла, срабатывает вариант
   logs = get_string_single_files()
5. Далее в коде определены несколько функций, выполняющих поиск в строке лога по переданному патерну:
   1. different_elements_counter - возвращает словарь в котором подсчитывает количество разных запросов,
   например {get:15, post:25}
   2. lements_counter - складывает все значения переданного словаря, чтобы получить общее количество элементов
   3. get_top3_elements - получает словарь, сортирует и возвращает новый словарь с тремя элементами с наибольшим значением
   4. get_requests_time - возвращает словарь где ключем являются параметры запроса, а значением время. 
   Содержит дополнительный параметр 'id' для уникальности ключей в словаре.
6. Создаем пустые словари в которых будем агрегировать полученные данные
7. В цикле for берем по одной строке, вытаскиваем вышеописанными функциями необходимые данные и складываем в объявленные словари.
8. Складываем полученные словари в один общий словарь, формируем из него json объект.
9. Печатаем json в консоль
10. Записываем json s в отдельный файл

Файлы логов для примера лежат в  ./testdir/
Скриншот file.png - скрипт запущен с указанием пути до файла
Скриншот dir.png - скрипт запущен с указанием пути до директории
result2.json - записанный результат работы скрипта